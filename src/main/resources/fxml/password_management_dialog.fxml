<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.pdfutilities.app.controller.PasswordManagementDialogController" 
      spacing="10.0" prefWidth="600.0" prefHeight="500.0">
    
    <padding>
        <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
    </padding>
    
    <children>
        <!-- Title -->
        <Label text="Manage Saved Passwords" style="-fx-font-size: 16px; -fx-font-weight: bold;">
            <padding>
                <Insets bottom="10.0"/>
            </padding>
        </Label>
            
        <!-- Security Warning Note -->
        <HBox spacing="8.0" alignment="CENTER_LEFT"
              style="-fx-background-color: #fff3cd; -fx-border-color: #ffc107; -fx-border-width: 1px; -fx-border-radius: 4px; -fx-background-radius: 4px;"
              maxWidth="Infinity">
            <padding>
                <Insets top="8.0" right="12.0" bottom="8.0" left="12.0"/>
            </padding>
            <children>
                <Label text="âš " style="-fx-font-size: 20px; -fx-text-fill: #856404;"/>
                <Label text="Security Warning: Passwords are stored in plain text. Use at your own risk."
                       style="-fx-font-weight: bold; -fx-text-fill: #856404; -fx-font-size: 12px;" HBox.hgrow="ALWAYS"/>
            </children>
        </HBox>
        
        <!-- Input Section -->
        <VBox spacing="10.0">
            <children>
                <Label text="Add/Edit Password:" style="-fx-font-weight: bold;"/>
                
                <GridPane hgap="10.0" vgap="10.0">
                    <columnConstraints>
                        <ColumnConstraints minWidth="80.0" halignment="RIGHT"/>
                        <ColumnConstraints minWidth="200.0" hgrow="ALWAYS"/>
                    </columnConstraints>
                    
                    <children>
                        <Label text="Name:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <TextField fx:id="nameField" GridPane.rowIndex="0" GridPane.columnIndex="1" 
                                   promptText="Enter descriptive name"/>
                        
                        <Label text="Password:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        <HBox spacing="6.0" GridPane.rowIndex="1" GridPane.columnIndex="1" alignment="CENTER_LEFT">
                            <children>
                                <StackPane HBox.hgrow="ALWAYS">
                                    <children>
                                        <PasswordField fx:id="passwordField" promptText="Enter password" maxWidth="Infinity" prefColumnCount="32"/>
                                        <TextField fx:id="passwordTextField" promptText="Enter password" visible="false" managed="false" maxWidth="Infinity" prefColumnCount="32"/>
                                    </children>
                                </StackPane>
                                <ToggleButton fx:id="passwordPeekToggle" text="" contentDisplay="GRAPHIC_ONLY"/>
                            </children>
                        </HBox>
                    </children>
                </GridPane>
                
                <!-- Action Buttons -->
                <HBox spacing="10.0" alignment="CENTER_LEFT">
                    <children>
                        <Button fx:id="addButton" text="Add" onAction="#handleAdd" 
                                style="-fx-min-width: 80px;"/>
                        <Button fx:id="editButton" text="Edit" onAction="#handleEdit" 
                                style="-fx-min-width: 80px;" disable="true"/>
                        <Button fx:id="deleteButton" text="Delete" onAction="#handleDelete" 
                                style="-fx-min-width: 80px;" disable="true"/>
                        <Button fx:id="clearButton" text="Clear" onAction="#handleClear" 
                                style="-fx-min-width: 80px;"/>
                    </children>
                </HBox>
            </children>
        </VBox>
        
        <!-- Separator -->
        <Separator/>
        
        <!-- Saved Passwords Table -->
        <VBox spacing="5.0" VBox.vgrow="ALWAYS">
            <children>
                <HBox spacing="10.0" alignment="CENTER_LEFT">
                    <children>
                        <Label text="Saved Passwords:" style="-fx-font-weight: bold;"/>
                        <ToggleButton fx:id="showPasswordsToggle" text="Show Passwords"/>
                    </children>
                </HBox>
                
                <TableView fx:id="passwordTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="nameColumn" text="Name"/>
                        <TableColumn fx:id="passwordColumn" text="Password"/>
                    </columns>
                </TableView>
            </children>
        </VBox>
        
        <!-- Dialog Buttons -->
        <HBox spacing="10.0" alignment="CENTER_RIGHT">
            <children>
                <Button text="OK" onAction="#handleOk" 
                        style="-fx-min-width: 80px; -fx-font-weight: bold;"/>
                <Button text="Cancel" onAction="#handleCancel" 
                        style="-fx-min-width: 80px;"/>
            </children>
        </HBox>
    </children>
</VBox>
